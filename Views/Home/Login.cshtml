@{
    ViewBag.Title = "Login";
}

<h2>Login</h2>

<div class="container">
    <form id="loginForm">
        <div class="form-group mt-3">
            <label for="login">Login</label>
            <input type="text" class="form-control" id="login" placeholder="Insira seu login">
        </div>
        <div class="form-group mt-3">
            <label for="senha">Senha</label>
            <input type="password" class="form-control" id="senha" placeholder="Insira sua senha">
        </div>
        <button type="button" class="btn btn-primary mt-3" onclick="logar()">Entrar</button>
    </form>
    <div id="erroLogin" class="alert alert-danger mt-2" style="display:none;">
        Login ou senha incorretos.
    </div>
</div>

<script>
    function logar() {
        var loginData = {
            Login: document.getElementById('login').value,
            Senha: document.getElementById('senha').value
        };

        $.ajax({
            url: '/Usuario/Autenticar',
            type: 'POST',
            data: JSON.stringify(loginData),
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                if (result.tipoUsuario === 'colaborador') {
                    window.location.href = '/Home/IndexColaborador';  // Redirecionar para página de colaboradores
                } else if (result.tipoUsuario === 'cliente') {
                    window.location.href = '/Home/IndexCliente';  // Redirecionar para página de clientes
                } else {
                    $('#erroLogin').show();
                }
            },
            error: function () {
                $('#erroLogin').show();
            }
        });
    }
</script>
